/*! child-tracker-loader.js - v1.1.0 - 2016-09-27 */
!function(a,b){var c=function(a){return a?a.autoInit():null},d=function(b,d){if("undefined"!=typeof a){b=b.split(".js")[0],d=d.split(".js")[0];var e="context_debates_"+b.split("/").slice(-1)[0],f=a.config({context:e,paths:{pym:b,tracker:d},shim:{pym:{exports:"pym"},tracker:{exports:"tracker"}}});return f(["require","pym","tracker"],function(a,b,d){var e=c(b);if(e)for(var f=0;f<e.length;f++){var g=e[f];g.trackers={},g.onMessage("test-visibility-tracker",function(){g.sendMessage("visibility-available","true")}),g.onMessage("remove-tracker",function(a){g.trackers[a].stopTracking(),delete g.trackers[a]}),g.onMessage("new-fact-check",function(a){var b=new d.VisibilityTracker(g,a,function(){g.sendMessage("on-screen",a)});g.trackers[a]=b}.bind(d))}else console.error("did not find any pym instance on autoInit")}),!0}return!1},e=function(a,d){return"undefined"!=typeof b&&"function"==typeof b.getScript&&(b.getScript(a).done(function(){var a=c(window.pym);b.getScript(d).done(function(){for(var b=0;b<a.length;b++){var c=a[b];c.trackers={},c.onMessage("test-visibility-tracker",function(){c.sendMessage("visibility-available","true")}),c.onMessage("remove-tracker",function(a){c.trackers[a].stopTracking(),delete c.trackers[a]}),c.onMessage("new-fact-check",function(a){var b=new window.ChildTracker.VisibilityTracker(c,a,function(){c.sendMessage("on-screen",a)});c.trackers[a]=b})}})}),!0)},f=function(a,b){var d=document.getElementsByTagName("head")[0],e=document.createElement("script");return e.type="text/javascript",e.src=a,e.onload=function(){d&&e.parentNode&&d.removeChild(e);var a=c(window.pym);d=document.getElementsByTagName("head")[0];var f=document.createElement("script");f.type="text/javascript",f.src=b,f.onload=function(){d&&e.parentNode&&d.removeChild(e);for(var b=0;b<a.length;b++){var c=a[b];c.trackers={},c.onMessage("test-visibility-tracker",function(){c.sendMessage("visibility-available","true")}),c.onMessage("remove-tracker",function(a){c.trackers[a].stopTracking(),delete c.trackers[a]}),c.onMessage("new-fact-check",function(a){var b=new window.ChildTracker.VisibilityTracker(c,a,function(){c.sendMessage("on-screen",a)});c.trackers[a]=b})}},d.appendChild(f)},d.appendChild(e),!0},g="//pym.nprapps.org/pym.v1.min.js";0===g.lastIndexOf("@@",0)&&(g="//pym.nprapps.org/pym.v1.min.js");var h="//carebot.nprapps.org/child-tracker.v1.min.js";0===h.lastIndexOf("@@",0)&&(h="//carebot.nprapps.org///child-tracker.v1.min.js"),d(g,h)||e(g,h)||f(g,h);var i=function(){document.removeEventListener("DOMContentLoaded",i),window.removeEventListener("load",i);var a=c(window.pym);if(a&&"undefined"!=typeof ChildTracker)for(var b=0;b<a.length;b++){var d=a[b];d.trackers={},d.onMessage("test-visibility-tracker",function(){d.sendMessage("visibility-available","true")}),d.onMessage("remove-tracker",function(a){d.trackers[a].stopTracking(),delete d.trackers[a]}),d.onMessage("new-fact-check",function(a){var b=new window.ChildTracker.VisibilityTracker(d,a,function(){d.sendMessage("on-screen",a)});d.trackers[a]=b})}return a};window.document.addEventListener("DOMContentLoaded",i),window.addEventListener("load",i)}(window.requirejs,window.jQuery);