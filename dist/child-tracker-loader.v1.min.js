/*! child-tracker-loader.js - v1.1.1 - 2016-10-19 */
!function(a,b){var c=function(a){return a?a.autoInit():null},d=function(a){0!==this.el.getElementsByTagName("iframe").length&&this.sendMessage("on-screen",a)},e=function(){var a=window.innerHeight||document.documentElement.clientHeight;0!==this.el.getElementsByTagName("iframe").length&&this.sendMessage("viewport-height",a)},f=function(){var a=location.hash;0!==this.el.getElementsByTagName("iframe").length&&this.sendMessage("visibility-available",a)},g=function(a){this.trackers[a].stopTracking(),delete this.trackers[a]},h=function(a,b){var c={};if(a){var e=new a.VisibilityTracker(this,b,d.bind(this,b),c);this.trackers[b]=e}else{var f=new window.ChildTracker.VisibilityTracker(this,b,d.bind(this,b),c);this.trackers[b]=f}},i=function(a,b){for(var c=0;c<a.length;c++)!function(c){var d=a[c];d.trackers={},d.onMessage("test-visibility-tracker",f),d.onMessage("remove-tracker",g),d.onMessage("new-fact-check",h.bind(d,b)),d.onMessage("get-viewport-height",e),window.addEventListener("resize",e.bind(d))}(c)},j=function(b,d){if("undefined"!=typeof a){b=b.split(".js")[0],d=d.split(".js")[0];var e="context_debates_"+b.split("/").slice(-1)[0],f=a.config({context:e,paths:{pym:b,tracker:d},shim:{pym:{exports:"pym"},tracker:{exports:"tracker"}}});return f(["require","pym","tracker"],function(a,b,d){var e=c(b);e?i(e,d):console.error("did not find any pym instance on autoInit")}),!0}return!1},k=function(a,d){return"undefined"!=typeof b&&"function"==typeof b.getScript&&(b.getScript(a).done(function(){var a=c(window.pym);b.getScript(d).done(function(){i(a)})}),!0)},l=function(a,b){var d=document.getElementsByTagName("head")[0],e=document.createElement("script");return e.type="text/javascript",e.src=a,e.onload=function(){d&&e.parentNode&&d.removeChild(e);var a=c(window.pym);d=document.getElementsByTagName("head")[0];var f=document.createElement("script");f.type="text/javascript",f.src=b,f.onload=function(){d&&e.parentNode&&d.removeChild(e),i(a)},d.appendChild(f)},d.appendChild(e),!0},m="//pym.nprapps.org/pym.v1.min.js";0===m.lastIndexOf("@@",0)&&(m="../../src/pym.js");var n="//carebot.nprapps.org/child-tracker.v1.min.js";0===n.lastIndexOf("@@",0)&&(n="../../src/child-tracker.js"),j(m,n)||k(m,n)||l(m,n);var o=function(){document.removeEventListener("DOMContentLoaded",o),window.removeEventListener("load",o);var a=c(window.pym);return a&&"undefined"!=typeof ChildTracker&&i(a),a};window.document.addEventListener("DOMContentLoaded",o),window.addEventListener("load",o)}(window.requirejs,window.jQuery);