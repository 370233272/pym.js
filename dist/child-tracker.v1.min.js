/*! child-tracker.js - v1.1.1 - 2016-10-06 */
!function(a){"function"==typeof define&&define.amd?define(a):"undefined"!=typeof module&&module.exports?module.exports=a():window.ChildTracker=a.call(this)}(function(){function a(a,b,d){var e,f,g,h=null,i=0;d||(d={});var j=function(){i=d.leading===!1?0:c(),h=null,g=a.apply(e,f),h||(e=f=null)};return function(){var k=c();i||d.leading!==!1||(i=k);var l=b-(k-i);return e=this,f=arguments,l<=0||l>b?(h&&(clearTimeout(h),h=null),i=k,g=a.apply(e,f),h||(e=f=null)):h||d.trailing===!1||(h=setTimeout(j,l)),g}}var b={},c=Date.now||function(){return(new Date).getTime()},d=function(a,b){function c(){a&&b&&(e=setTimeout(a,b))}function d(){clearTimeout(e)}var e;return{start:c,stop:d}};return b.VisibilityTracker=function(b,c,e,f){function g(a){var b=a.split(" "),c={top:parseFloat(b[0]),left:parseFloat(b[1]),bottom:parseFloat(b[2]),right:parseFloat(b[3])};return c}function h(a){var c=b.iframe.getBoundingClientRect(),d=window.innerWidth||document.documentElement.clientWidth,e=window.innerHeight||document.documentElement.clientHeight,f=e-c.top,g=a.bottom,h=g+e,i=a.left>d,j=a.right<0,k=a.top>f,l=f>h||g>f;return!(i||j||k||l)}function i(a){var c=h(a);return this.isVisible&&!c&&k.stop(),!this.isVisible&&c&&(k.start(),0!==b.el.getElementsByTagName("iframe").length&&b.sendMessage("fact-check-visible",this.id),setTimeout(l.bind(this),this.settings.ANIMATION_DURATION)),this.isVisible=c,this.isVisible}this.settings={WAIT_TO_ENSURE_SCROLLING_IS_DONE:40,WAIT_TO_MARK_READ:500,ANIMATION_DURATION:800},this.id=c,this.isVisible=!1;for(var j in f)this.settings[j]=f[j];var k=new d(e,this.settings.WAIT_TO_MARK_READ);f=f||{};var l=function(){0!==b.el.getElementsByTagName("iframe").length&&b.sendMessage("request-client-rect",this.id)},m=a(l.bind(this),this.settings.WAIT_TO_ENSURE_SCROLLING_IS_DONE);return this.stopTracking=function(){window.removeEventListener&&(removeEventListener("DOMContentLoaded",m,!1),removeEventListener("load",m,!1),removeEventListener("scroll",m,!1),removeEventListener("resize",m,!1))},window.addEventListener&&(addEventListener("DOMContentLoaded",m,!1),addEventListener("load",m,!1),addEventListener("scroll",m,!1),addEventListener("resize",m,!1)),b.onMessage(this.id+"-rect-return",function(a){var b=g(a);i.call(this,b)}.bind(this)),l.call(this),this},b});