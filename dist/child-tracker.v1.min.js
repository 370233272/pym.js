/*! child-tracker.js - v1.1.0 - 2016-09-28 */
!function(a){"function"==typeof define&&define.amd?define(a):"undefined"!=typeof module&&module.exports?module.exports=a():window.ChildTracker=a.call(this)}(function(){function a(a,b,d){var e,f,g,h=null,i=0;d||(d={});var j=function(){i=d.leading===!1?0:c(),h=null,g=a.apply(e,f),h||(e=f=null)};return function(){var k=c();i||d.leading!==!1||(i=k);var l=b-(k-i);return e=this,f=arguments,l<=0||l>b?(h&&(clearTimeout(h),h=null),i=k,g=a.apply(e,f),h||(e=f=null)):h||d.trailing===!1||(h=setTimeout(j,l)),g}}var b={},c=Date.now||function(){return(new Date).getTime()},d=function(a,b){function c(){a&&b&&(e=setTimeout(a,b))}function d(){clearTimeout(e)}var e;return{start:c,stop:d}};return b.VisibilityTracker=function(b,c,e,f){function g(a){var b=a.split(" "),c={top:parseFloat(b[0]),left:parseFloat(b[1]),bottom:parseFloat(b[2]),right:parseFloat(b[3])};return c}function h(a){var c=b.iframe.getBoundingClientRect(),d=window.innerWidth||document.documentElement.clientWidth,e=window.innerHeight||document.documentElement.clientHeight,f=Math.abs(c.top)+e,g=a.top+(a.bottom-a.top),h=g+e,i=a.left>d,j=a.right<0,k=a.top>f,l=f>h||g>f;return!(i||j||k||l)}function i(a){var d=h(a);return l&&!d&&m.stop(),!l&&d&&(m.start(),b.sendMessage("fact-check-visible",c),setTimeout(n,this.settings.ANIMATION_DURATION)),l=d,d}function j(){window.removeEventListener&&(removeEventListener("DOMContentLoaded",o,!1),removeEventListener("load",o,!1),removeEventListener("scroll",o,!1),removeEventListener("resize",o,!1))}this.settings={WAIT_TO_ENSURE_SCROLLING_IS_DONE:40,WAIT_TO_MARK_READ:500,ANIMATION_DURATION:800};for(var k in f)this.settings[k]=f[k];var l=!1,m=new d(e,this.settings.WAIT_TO_MARK_READ);f=f||{};var n=function(){b.sendMessage("request-client-rect",c)},o=a(n,this.settings.WAIT_TO_ENSURE_SCROLLING_IS_DONE);return window.addEventListener&&(addEventListener("DOMContentLoaded",o,!1),addEventListener("load",o,!1),addEventListener("scroll",o,!1),addEventListener("resize",o,!1)),b.onMessage(c+"-rect-return",function(a){var b=g(a);i.call(this,b)}.bind(this)),n(),{stopTracking:j}},b});