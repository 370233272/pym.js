/*! child-tracker.js - v1.1.0 - 2016-09-27 */
!function(a){"function"==typeof define&&define.amd?define(a):"undefined"!=typeof module&&module.exports?module.exports=a():window.ChildTracker=a.call(this)}(function(){function a(a,b,d){var e,f,g,h=null,i=0;d||(d={});var j=function(){i=d.leading===!1?0:c(),h=null,g=a.apply(e,f),h||(e=f=null)};return function(){var k=c();i||d.leading!==!1||(i=k);var l=b-(k-i);return e=this,f=arguments,l<=0||l>b?(h&&(clearTimeout(h),h=null),i=k,g=a.apply(e,f),h||(e=f=null)):h||d.trailing===!1||(h=setTimeout(j,l)),g}}var b={},c=Date.now||function(){return(new Date).getTime()},d=function(a,b){function c(){a&&b&&(e=setTimeout(a,b))}function d(){clearTimeout(e)}var e;return{start:c,stop:d}};return b.VisibilityTracker=function(b,c,e,f){function g(a){var b=a.split(" "),c={top:parseFloat(b[0]),left:parseFloat(b[1]),bottom:parseFloat(b[2]),right:parseFloat(b[3])};return c}function h(a){var c=b.iframe.getBoundingClientRect(),d=window.innerWidth||document.documentElement.clientWidth,e=window.innerHeight||document.documentElement.clientHeight,f=Math.abs(c.top)+e,g=a.top+(a.bottom-a.top),h=g+e,i=a.left>d,j=a.right<0,k=a.top>f,l=f>h||g>f;return!(i||j||k||l)}function i(a){var d=h(a);return n&&!d&&o.stop(),!n&&d&&(o.start(),b.sendMessage("fact-check-visible",c),setTimeout(p,m)),n=d,d}function j(){window.removeEventListener&&(removeEventListener("DOMContentLoaded",q,!1),removeEventListener("load",q,!1),removeEventListener("scroll",q,!1),removeEventListener("resize",q,!1))}var k=40,l=500,m=800,n=!1,o=new d(e,l);f=f||{};var p=function(){b.sendMessage("request-client-rect",c)},q=a(p,k);return window.addEventListener&&(addEventListener("DOMContentLoaded",q,!1),addEventListener("load",q,!1),addEventListener("scroll",q,!1),addEventListener("resize",q,!1)),b.onMessage(c+"-rect-return",function(a){var b=g(a);i(b)}),p(),{stopTracking:j}},b});